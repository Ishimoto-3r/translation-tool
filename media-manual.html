<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>動画から原稿作成ツール</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/media-manual.js" defer></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
      margin: 0;
      padding: 0
    }

    .tool-nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: #374151;
      padding: 10px 16px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .12);
      display: flex;
      justify-content: center;
      gap: 14px;
      align-items: center;
      flex-wrap: wrap
    }

    .nav-groupbox {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      padding: 8px 10px;
      border: 1px solid rgba(255, 255, 255, .14);
      border-radius: 10px;
      background: rgba(255, 255, 255, .04)
    }

    .nav-heading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      width: 100%;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .08em;
      color: rgba(243, 244, 246, .85)
    }

    .nav-links {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap
    }

    .tool-nav a {
      color: #f3f4f6;
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, .06)
    }

    .tool-nav a:hover {
      background: rgba(255, 255, 255, .12)
    }

    .tool-nav a.active {
      background: #172554;
      color: #fff
    }

    .thumb {
      position: relative;
      width: 112px;
      height: 84px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      overflow: hidden;
      background: #f8fafc;
      display: flex;
      align-items: center;
      justify-content: center
    }

    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover
    }

    .thumb button {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: rgba(15, 23, 42, .75);
      color: white;
      font-size: 14px;
      line-height: 22px;
      text-align: center;
    }

    .thumb button:hover {
      background: rgba(15, 23, 42, .9)
    }
  </style>
  <link rel="stylesheet" href="/css/navigation.css">
</head>

<body class="bg-slate-100">
  <script src="/navigation.js" defer></script>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 hidden items-center justify-center bg-black/40 z-50">
    <div class="bg-white rounded-xl shadow-lg w-[440px] p-5">
      <div class="flex items-start gap-3">
        <div class="h-6 w-6 rounded-full border-4 border-slate-300 border-t-slate-700 animate-spin mt-1"></div>
        <div class="flex-1">
          <div id="overlay-title" class="font-semibold">処理中…</div>
          <div id="overlay-msg" class="text-sm text-slate-600 mt-1">しばらくお待ちください</div>
          <div id="overlay-log" class="text-xs text-slate-500 mt-3 whitespace-pre-line"></div>
        </div>
      </div>
    </div>
  </div>

  <main class="w-full max-w-[1400px] mx-auto px-6 py-4 grid grid-cols-12 gap-5">
    <section class="col-span-12 lg:col-span-4 bg-white rounded-xl p-4 shadow">
      <div class="font-bold mb-3">入力</div>

      <label class="block text-sm mb-1">備考（任意）</label>
      <textarea id="notes" class="w-full border rounded-lg p-2 mb-3" rows="4"
        placeholder="例：電池交換手順を作成したい / 組み立て方法を文章化したい"></textarea>

      <label class="block text-sm mb-1">文量</label>
      <select id="granularity" class="w-full border rounded-lg p-2">
        <option value="simple">短め（要点だけ）</option>
        <option value="standard" selected>ふつう（標準）</option>
        <option value="detailed">丁寧（補足あり）</option>
      </select>

      <div class="text-xs text-slate-600 mt-3">
        動画は <span class="font-semibold">1本のみ</span> / <span class="font-semibold">30秒以内</span> / <span
          class="font-semibold">最大200MB</span> / 画像は不可<br>
        送信フレーム：<span class="font-semibold">最大20枚</span>（差分ベース・補間なし）
      </div>

      <!-- D&D + click -->
      <div id="dropZone" class="mt-3 border-2 border-slate-400 bg-slate-50/60 rounded-xl p-6 text-sm text-slate-700 cursor-pointer
               hover:bg-slate-50 min-h-[160px] flex flex-col justify-center gap-2 shadow-sm">
        <div class="font-medium text-slate-800">ここに動画をドラッグ＆ドロップ（またはクリックして選択）</div>
        <div class="text-xs text-slate-600">対応：mp4 / mov / webm 等（30秒以内）</div>
      </div>
      <input id="fileInput" type="file" accept="video/*" class="hidden" />

      <div id="selectedInfo" class="mt-2 text-sm text-slate-700"></div>

      <div class="mt-3 text-sm text-slate-600">プレビュー（送信フレーム）</div>
      <div id="preview" class="mt-2 flex flex-wrap gap-2"></div>
      <div class="text-xs text-slate-500 mt-2">※不要なフレームはサムネ右上の×で削除できます。</div>

      <div class="mt-3 flex gap-2">
        <button id="clearBtn" type="button"
          class="flex-1 bg-slate-200 hover:bg-slate-300 rounded-xl p-2 font-semibold">クリア</button>
        <button id="runBtn" type="button" disabled
          class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl p-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed">
          原稿案を生成
        </button>
      </div>

      <div id="status" class="mt-3 text-sm text-slate-600"></div>
    </section>

    <section class="col-span-12 lg:col-span-8 bg-white rounded-xl p-4 shadow">
      <div class="font-bold mb-3">出力（原稿案）</div>
      <textarea id="output" class="w-full min-h-[420px] border rounded-xl p-3 text-sm"
        placeholder="ここに原稿案が表示されます"></textarea>
      <div class="mt-3 flex justify-end">
        <button id="copyBtn" type="button"
          class="bg-slate-200 hover:bg-slate-300 rounded-xl px-3 py-2 text-sm font-semibold">コピー</button>
      </div>
    </section>
  </main>
</body>

</html>